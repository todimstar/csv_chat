# 用户故事地图 (User Story Map)

## 1. 用户故事地图概述

本用户故事地图旨在通过可视化用户活动、任务和故事，帮助团队更好地理解用户需求，规划产品功能，并确保产品迭代聚焦于为用户创造核心价值。“AI磁盘空间分析助手”的用户故事地图将围绕用户从准备数据到分析洞察，再到执行清理的完整旅程展开。

## 2. 用户活动流 (横向 Backbone)

```mermaid
graph LR
    Activity1[准备与导入数据] --> Activity2[查看与理解现状];
    Activity2 --> Activity3[深入分析与洞察];
    Activity3 --> Activity4[决策与执行清理];
    Activity4 --> Activity5[追踪与管理历史];
```

- **准备与导入数据**: 用户获取磁盘扫描数据并将其导入到应用中。
- **查看与理解现状**: 用户通过可视化图表和摘要快速了解当前磁盘空间占用情况。
- **深入分析与洞察**: 用户利用AI分析、筛选等功能，深入挖掘数据，获取清理建议和文件变化信息。
- **决策与执行清理**: 用户根据分析结果和建议，决定如何操作文件（定位、删除、备份等）。
- **追踪与管理历史**: 用户保存分析快照，对比历史数据，了解长期趋势。

## 3. 用户任务分解 (纵向 Tasks & Stories)

### 用户活动: 准备与导入数据

| 用户任务 (User Task)             | 用户故事 (User Story)                                                                 | 优先级 | 关联版本 (Roadmap) | 备注                               |
| -------------------------------- | ------------------------------------------------------------------------------------- | ------ | ------------------ | ---------------------------------- |
| **获取磁盘扫描数据**             | 作为用户，我想要知道如何使用WizTree等工具扫描磁盘并导出CSV文件，以便我能准备好分析所需的数据。 | P1     | MVP                | 提供简单教程或指引                 |
| **上传CSV文件**                  | 作为用户，我想要通过简单的点击或拖拽方式上传CSV文件，以便应用可以开始分析。                   | P0     | MVP                | 支持文件选择对话框                 |
| **校验CSV文件格式**              | 作为用户，我希望应用能校验我上传的CSV文件格式是否正确，以便及时发现问题并得到提示。             | P0     | MVP                | 检查关键列是否存在                 |
| (远期) 直接触发外部工具扫描      | 作为用户，我希望能直接在应用内触发WizTree等工具进行扫描并自动导入数据，以简化操作步骤。       | P2     | v2.0+              | 需要命令行集成                     |

### 用户活动: 查看与理解现状

| 用户任务 (User Task)             | 用户故事 (User Story)                                                                 | 优先级 | 关联版本 (Roadmap) | 备注                               |
| -------------------------------- | ------------------------------------------------------------------------------------- | ------ | ------------------ | ---------------------------------- |
| **查看磁盘空间总体概览**         | 作为用户，我想要在应用首页看到磁盘总空间、已用空间、可用空间的概览，以便快速了解整体情况。        | P0     | MVP                | 卡片式数据显示                     |
| **查看文件组成结构 (文件夹)**    | 作为用户，我想要通过旭日图或树状图查看文件夹层级和各文件夹的大小占比，以便直观了解空间分布。      | P0     | MVP                | 支持交互（下钻、悬浮提示）         |
| **查看文件类型分布**             | 作为用户，我想要通过饼图或柱状图查看不同文件类型（视频、文档、图片等）占用的空间比例，以便了解主要构成。 | P0     | MVP                |                                    |
| **快速定位大文件/文件夹**        | 作为用户，我想要应用能直接列出占用空间最大的Top N文件和文件夹，以便我快速找到潜在清理目标。     | P0     | MVP                | 列表展示，可排序                   |

### 用户活动: 深入分析与洞察

| 用户任务 (User Task)             | 用户故事 (User Story)                                                                 | 优先级 | 关联版本 (Roadmap) | 备注                               |
| -------------------------------- | ------------------------------------------------------------------------------------- | ------ | ------------------ | ---------------------------------- |
| **接收AI智能分析结果**           | 作为用户，我想要应用能调用AI分析我上传的数据，并给出关于文件冗余、清理潜力的智能洞察。          | P0     | v0.2               | 需配置API Key                     |
| **获取清理建议**                 | 作为用户，我想要应用根据分析结果（包括AI分析）提供具体的清理建议，例如哪些文件可以考虑删除或归档。 | P0     | MVP (基础), v0.2 (AI) | 建议应说明理由                     |
| **按条件筛选文件列表**           | 作为用户，我想要按文件类型、大小、修改日期等条件筛选文件列表，以便我能聚焦于特定文件集。        | P1     | v1.0               |                                    |
| **按类型或扩展名查询文件**     | 作为用户，我希望能按文件类别（如“视频”）或扩展名（如“.exe”）查询文件列表，以便快速找到我关心的特定类型的文件。 | P0     | MVP (补充)         | 增强对特定文件类型的洞察           |
| **查看文件详细信息**             | 作为用户，我想要查看选定文件/文件夹的完整路径、大小、创建/修改日期等详细信息。                | P0     | MVP                |                                    |
| (远期) 分析重复文件              | 作为用户，我想要应用能帮我找出磁盘上的重复文件，以便我释放这部分冗余空间。                    | P2     | v1.0 (基础), v2.0+ (AI) |                                    |

### 用户活动: 决策与执行清理

| 用户任务 (User Task)             | 用户故事 (User Story)                                                                 | 优先级 | 关联版本 (Roadmap) | 备注                               |
| -------------------------------- | ------------------------------------------------------------------------------------- | ------ | ------------------ | ---------------------------------- |
| **在文件管理器中定位文件**       | 作为用户，当我看到一个建议清理的文件或可疑文件时，我想要能快速在操作系统的文件管理器中定位到它，以便我做最终确认和操作。 | P0     | MVP                | “打开所在文件夹”并选中文件功能     |
| **标记待处理文件 (可选)**        | 作为用户，我希望能标记一些文件为“待删除”或“待备份”，以便后续统一处理。                      | P2     | v1.0+              | 应用内标记，不直接操作文件         |
| **导出分析报告**                 | 作为用户，我想要将当前的分析结果（包括图表和列表）导出为一份报告（如HTML/PDF），以便我存档或分享。 | P1     | v1.0               |                                    |

### 用户活动: 追踪与管理历史

| 用户任务 (User Task)             | 用户故事 (User Story)                                                                 | 优先级 | 关联版本 (Roadmap) | 备注                               |
| -------------------------------- | ------------------------------------------------------------------------------------- | ------ | ------------------ | ---------------------------------- |
| **保存当前分析结果为快照**       | 作为用户，我想要将某一次的磁盘分析结果保存为一个快照，并可以命名，以便我将来回顾或对比。        | P0     | v0.3               | 记录分析时间                       |
| **查看已保存的快照列表**         | 作为用户，我想要查看所有已保存的快照列表，并能进行管理（如重命名、删除）。                   | P1     | v0.3               |                                    |
| **加载并查看历史快照数据**       | 作为用户，我想要加载某个历史快照，查看当时的磁盘分析情况。                                | P0     | v0.3               |                                    |
| **对比两个快照的差异**           | 作为用户，我想要选择两个不同的快照进行对比，应用能高亮显示文件/文件夹的增删和大小变化。       | P0     | v0.3               | 可视化差异                         |
| **查看文件/文件夹增长趋势**      | 作为用户，我想要基于多次快照数据，查看特定文件/文件夹或总体空间随时间变化的趋势图。           | P1     | v0.3               | 折线图等                           |

## 4. 故事优先级与版本映射

*(本节内容已在上述表格的“优先级”和“关联版本”列中体现，此处为汇总说明)*

- **MVP 版本 (v0.1)**: 聚焦于核心流程的打通，包括CSV导入、基础分析（大文件、类型分布）、核心可视化（旭日图、饼图）以及在文件管理器中定位文件的能力。目标是快速验证产品核心价值。
- **v0.2 版本**: 引入AI分析能力，提升洞察的智能化水平，并提供API Key配置。
- **v0.3 版本**: 增加历史快照功能，实现趋势分析和历史数据对比。
- **v1.0 版本**: 完善用户体验，增加报告导出、性能优化等，作为正式版发布。
- **后续版本 (v2.0+)**: 逐步加入更高级的功能，如直接扫描集成、高级AI应用、跨平台支持等。

此用户故事地图将作为产品开发和迭代的动态指南，随用户反馈和市场变化持续更新。